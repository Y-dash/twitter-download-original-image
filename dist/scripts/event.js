"use strict";var CONTEXT_ID="twitter-download-original-image";function download(e){e.searchParams.set("name","orig");var t=e.pathname.replace("/media/","")+"_"+e.searchParams.get("name")+"."+e.searchParams.get("format");chrome.downloads.download({url:e.toString(),filename:t})}chrome.runtime.onInstalled.addListener(function(){chrome.contextMenus.removeAll(),chrome.contextMenus.create({type:"normal",id:CONTEXT_ID,title:"元画像を保存",contexts:["image"],targetUrlPatterns:["*://pbs.twimg.com/media/*"]})}),chrome.contextMenus.onClicked.addListener(function(e){e.srcUrl&&e.menuItemId===CONTEXT_ID&&download(new URL(e.srcUrl))});